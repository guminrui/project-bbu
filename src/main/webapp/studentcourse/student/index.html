<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<link href="/jquery/bootstrap_3.3.0/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
<link href="/jquery/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css" type="text/css" rel="stylesheet" />

<script type="text/javascript" src="/jquery/jquery-1.11.1-min.js"></script>
<script type="text/javascript" src="/jquery/bootstrap_3.3.0/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/jquery/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="/jquery/bootstrap-datetimepicker-master/locale/bootstrap-datetimepicker.zh-CN.js"></script>

<script type="text/javascript">
	$(function(){
		$(".time").datetimepicker({
			minView: "month",
			language:  'zh-CN',
			format: 'yyyy-mm-dd',
			autoclose: true,//选择时间自动关闭
			todayBtn: true,//选择时间
			pickerPosition: "top-left"//位置
		});



		/*创建按钮事件*/
		$("#createBut").click(function () {
			$("#createClueModal").modal('show');
	/*		$.ajax({
				url:'/clue/show',
				type:'get',
				dataType:'json',
				success:function(obj){
					if (obj.message=="OK"){
						var users = obj.data.users;
					}
				}
			})*/
		})


		$("#addSave").click(function () {
			$.ajax({
				url:'/clue/add',
				type:'post',
				data:{
					name:$.trim($("#create-fullname").val()),
					classandgrade:$.trim($("#create-company").val()),
					duty:$.trim($("#create-job").val()),
					email:$.trim($("#create-email").val()),
					phone:$.trim($("#create-phone").val()),
					QQ:$.trim($("#create-website").val()),
					description:$.trim($("#create-description").val()),
					nextcontacttime:$.trim($("#create-nextContactTime").val()),
					address:$.trim($("#create-address").val())
				},
				dataType:'json',
				success:function(obj){
					alert("fafafa")
					if (obj.message=="OK"){
						$("#createClueModal").modal('hide');
					}
				}

			})
		})
		$("#checkAll").click(function () {
			$("input[name='checkChild']").prop("checked",this.checked);
		})
		$("#queryAll1").on('click','input[name="checkChild"]',function () {
			$("#checkAll").prop("checked",$("input[name='checkChild']").length==$("input[name='checkChild']:checked").length)
		})
		pageList(4,1)

	});
	// function queryAll() {
	// 	$.ajax({
	// 		url:'/clue/queryAll',
	// 		dataType:'json',
	// 		type:'get',
	// 		data: {
	// 			name:$("#clue_name").val(),
	// 			classandgrade:$("#clue_company").val()
	// 		},
	// 		success:function (data) {
	// 			if (data.message=="OK"){
	// 				if (data!=null){
	// 				var obj = data.data;
	// 				var clueHtml = '';
	// 				for (var i  in obj ){
	// 				clueHtml+='<tr>';
	// 				clueHtml+='<td><input type="checkbox" name="checkChild" /></td>';
	// 				clueHtml+='<td><a style="text-decoration: none; cursor: pointer;" href="detail.html?id='+obj[i].id+'">'+obj[i].name+'</a></td>';
	// 					/*clueHtml+='<td>'+obj[i].name+'</td>';*/
	// 				clueHtml+='<td>'+obj[i].classandgrade+'</td>';
	// 				clueHtml+='<td>'+obj[i].duty+'</td>';
	// 				clueHtml+='<td>'+obj[i].phone+'</td>';
	// 				clueHtml+='</tr>';
	// 			}
	// 			$("#queryAll1").html(clueHtml);
	// 			}
	// 			}
	// 		}
	// 	})



	function pageList(pageSize,pageNo) {
		//$("#checkAll").prop("checked",false);
		// var name = $("#hidden-name").val()
		// var owner = $("#hidden-owner").val()
		// var startdate = $("#hidden-startdate").val()
		// var enddate = $("#hidden-enddate").val()
		$.ajax({
			url:'/clue/queryAll',
			type:'get',
			dataType:'json',
			data:{
				pageSize:pageSize,
				pageNo:pageNo,
				name:$("#clue_name").val(),
				classandgrade:$("#clue_company").val(),
				phone:$("#create-phone").val()
				// name:$.trim(name),
				// owner:$.trim(owner),
				// startdate:$.trim(startdate),
				// enddate:$.trim(enddate)
			},
			success:function (data) {
					if (data.message=="OK"){
						if (data!=null){
							var obj = data.data;
							var clueHtml = '';
							for (var i  in obj ){
								clueHtml+='<tr>';
								clueHtml+='<td><input type="checkbox" name="checkChild" /></td>';
								clueHtml+='<td><a style="text-decoration: none; cursor: pointer;" href="detail.html?id='+obj[i].id+'">'+obj[i].name+'</a></td>';
								/*clueHtml+='<td>'+obj[i].name+'</td>';*/
								clueHtml+='<td>'+obj[i].classandgrade+'</td>';
								clueHtml+='<td>'+obj[i].duty+'</td>';
								clueHtml+='<td>'+obj[i].phone+'</td>';
								clueHtml+='</tr>';
							}
							$("#queryAll1").html(clueHtml);
						//总页面数=总记录数/每页记录数
						var totalPages = obj.data.page%pageSize==0?(obj.data.page/pageSize):(obj.data.page/pageSize)+1;
						$("#activityPage").bs_pagination({
							currentPage: pageNo, // 页码
							rowsPerPage: pageSize, // 每页显示的记录条数
							maxRowsPerPage: 20, // 每页最多显示的记录条数
							totalPages: totalPages, // 总页数
							totalRows: obj.data.page, // 总记录条数
							visiblePageLinks: 3, // 显示几个卡片
							showGoToPage: true,
							showRowsPerPage: true,
							showRowsInfo: true,
							showRowsDefaultInfo: true,
							onChangePage : function(event, obj){
								pageList(obj.rowsPerPage,obj.currentPage);
							}
						});
					}
				}
			}
		})
	}
</script>
</head>
<body>

<!-- 创建线索的模态窗口 -->
<div class="modal fade" id="createClueModal" role="dialog">
	<div class="modal-dialog" role="document" style="width: 90%;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="myModalLabel">创建线索</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal" role="form">
					<div class="form-group">
						<label for="create-company" class="col-sm-2 control-label">年级-班级<span style="font-size: 15px; color: red;">*</span></label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-company">
						</div>
					</div>
					<div class="form-group">
						<label for="create-fullname" class="col-sm-2 control-label">学生姓名<span style="font-size: 15px; color: red;">*</span></label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-fullname">
						</div>
					</div>
					<div class="form-group">
						<label for="create-job" class="col-sm-2 control-label">职位</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-job">
						</div>
						<label for="create-email" class="col-sm-2 control-label">邮箱</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-email">
						</div>
					</div>
					<div class="form-group">
						<label for="create-phone" class="col-sm-2 control-label">手机号</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-phone">
						</div>
						<label for="create-website" class="col-sm-2 control-label">QQ</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="create-website">
						</div>
					</div>
					<div class="form-group">
						<label for="create-description" class="col-sm-2 control-label">线索描述</label>
						<div class="col-sm-10" style="width: 81%;">
							<textarea class="form-control" rows="3" id="create-description"></textarea>
						</div>
					</div>
					<div style="height: 1px; width: 103%; background-color: #D5D5D5; left: -13px; position: relative;"></div>
					<div style="position: relative;top: 15px;">

						<div class="form-group">
							<label for="create-nextContactTime" class="col-sm-2 control-label">出生日期</label>
							<div class="col-sm-10" style="width: 300px;">
								<input type="text" class="form-control time" id="create-nextContactTime">
							</div>
						</div>
					</div>

					<div style="height: 1px; width: 103%; background-color: #D5D5D5; left: -13px; position: relative; top : 10px;"></div>

					<div style="position: relative;top: 20px;">
						<div class="form-group">
							<label for="create-address" class="col-sm-2 control-label">家庭地址</label>
							<div class="col-sm-10" style="width: 81%;">
								<textarea class="form-control" rows="1" id="create-address"></textarea>
							</div>
						</div>
					</div>
				</form>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				<button type="button" class="btn btn-primary" id="addSave">保存</button>
			</div>
		</div>
	</div>
</div>

<!-- 修改线索的模态窗口 -->
<div class="modal fade" id="editClueModal" role="dialog">
	<div class="modal-dialog" role="document" style="width: 90%;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title">修改线索</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal" role="form">

					<div class="form-group">
<!--						<label for="edit-clueOwner" class="col-sm-2 control-label">所有者<span style="font-size: 15px; color: red;">*</span></label>-->
<!--						<div class="col-sm-10" style="width: 300px;">-->
<!--							<select class="form-control" id="edit-clueOwner">-->
<!--								<option>zhangsan</option>-->
<!--								<option>lisi</option>-->
<!--								<option>wangwu</option>-->
<!--							</select>-->
<!--						</div>-->
						<label for="edit-company" class="col-sm-2 control-label">公司<span style="font-size: 15px; color: red;">*</span></label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-company" value="动力节点">
						</div>
					</div>

					<div class="form-group">
<!--						<label for="edit-call" class="col-sm-2 control-label">称呼</label>-->
<!--						<div class="col-sm-10" style="width: 300px;">-->
<!--							<select class="form-control" id="edit-call">-->
<!--								<option></option>-->
<!--								<option selected>先生</option>-->
<!--								<option>夫人</option>-->
<!--								<option>女士</option>-->
<!--								<option>博士</option>-->
<!--								<option>教授</option>-->
<!--							</select>-->
<!--						</div>-->
						<label for="edit-surname" class="col-sm-2 control-label">姓名<span style="font-size: 15px; color: red;">*</span></label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-surname" value="李四">
						</div>
					</div>

					<div class="form-group">
						<label for="edit-job" class="col-sm-2 control-label">职位</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-job" value="CTO">
						</div>
						<label for="edit-email" class="col-sm-2 control-label">邮箱</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-email" value="lisi@bjpowernode.com">
						</div>
					</div>

					<div class="form-group">
						<label for="edit-phone" class="col-sm-2 control-label">公司座机</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-phone" value="010-84846003">
						</div>
						<label for="edit-website" class="col-sm-2 control-label">公司网站</label>
						<div class="col-sm-10" style="width: 300px;">
							<input type="text" class="form-control" id="edit-website">
						</div>
					</div>



					<div class="form-group">
						<label for="edit-describe" class="col-sm-2 control-label">描述</label>
						<div class="col-sm-10" style="width: 81%;">
							<textarea class="form-control" rows="3" id="edit-describe">这是一条线索的描述信息</textarea>
						</div>
					</div>

					<div style="height: 1px; width: 103%; background-color: #D5D5D5; left: -13px; position: relative;"></div>

					<div style="position: relative;top: 15px;">
						<div class="form-group">
							<label for="edit-contactSummary" class="col-sm-2 control-label">联系纪要</label>
							<div class="col-sm-10" style="width: 81%;">
								<textarea class="form-control" rows="3" id="edit-contactSummary">这个线索即将被转换</textarea>
							</div>
						</div>
						<div class="form-group">
							<label for="edit-nextContactTime" class="col-sm-2 control-label">下次联系时间</label>
							<div class="col-sm-10" style="width: 300px;">
								<input type="text" class="form-control" id="edit-nextContactTime" value="2017-05-01">
							</div>
						</div>
					</div>

					<div style="height: 1px; width: 103%; background-color: #D5D5D5; left: -13px; position: relative; top : 10px;"></div>

					<div style="position: relative;top: 20px;">
						<div class="form-group">
							<label for="edit-address" class="col-sm-2 control-label">详细地址</label>
							<div class="col-sm-10" style="width: 81%;">
								<textarea class="form-control" rows="1" id="edit-address">北京大兴区大族企业湾</textarea>
							</div>
						</div>
					</div>
				</form>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">更新</button>
			</div>
		</div>
	</div>
</div>




<div>
	<div style="position: relative; left: 10px; top: -10px;">
		<div class="page-header">
			<h3>学生信息</h3>
		</div>
	</div>
</div>

<div style="position: relative; top: -20px; left: 0px; width: 100%; height: 100%;">

	<div style="width: 100%; position: absolute;top: 5px; left: 10px;">

		<div class="btn-toolbar" role="toolbar" style="height: 80px;">
			<form class="form-inline" role="form" style="position: relative;top: 8%; left: 5px;">

				<div class="form-group">
					<div class="input-group">
						<div class="input-group-addon" id="clue_name">姓名</div>
						<input class="form-control" type="text">
					</div>
				</div>

				<div class="form-group">
					<div class="input-group">
						<div class="input-group-addon" id="clue_company">班级</div>
						<input class="form-control" type="text">
					</div>
				</div>

				<div class="form-group">
					<div class="input-group">
						<div class="input-group-addon">联系号码</div>
						<input class="form-control" type="text">
					</div>
				</div>
				<button type="submit" class="btn btn-default" id="search-clue">查询</button>

			</form>
		</div>
		<div class="btn-toolbar" role="toolbar" style="background-color: #F7F7F7; height: 50px; position: relative;top: 40px;">
			<div class="btn-group" style="position: relative; top: 18%;">
				<button type="button" class="btn btn-primary" data-toggle="modal" id="createBut"><span class="glyphicon glyphicon-plus"></span> 创建</button>
				<button type="button" class="btn btn-default" data-toggle="modal" data-target="#editClueModal"><span class="glyphicon glyphicon-pencil"></span> 修改</button>
				<button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-minus"></span> 删除</button>
			</div>


		</div>
		<div style="position: relative;top: 50px;">
			<table class="table table-hover">
				<thead>
				<tr style="color: #B3B3B3;">
					<td><input type="checkbox" id="checkAll" /></td>
					<td>姓名</td>
					<td>班级</td>
					<td>班级职务</td>
					<td>手机号码</td>
				</tr>
				</thead>
				<tbody id="queryAll1">
				</tbody>
			</table>
		</div>

<!--		<div style="height: 50px; position: relative;top: 60px;">-->
<!--			<div>-->
<!--				<button type="button" class="btn btn-default" style="cursor: default;">共<b>50</b>条记录</button>-->
<!--			</div>-->
<!--			<div class="btn-group" style="position: relative;top: -34px; left: 110px;">-->
<!--				<button type="button" class="btn btn-default" style="cursor: default;">显示</button>-->
<!--				<div class="btn-group">-->
<!--					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">-->
<!--						10-->
<!--						<span class="caret"></span>-->
<!--					</button>-->
<!--					<ul class="dropdown-menu" role="menu">-->
<!--						<li><a href="#">20</a></li>-->
<!--						<li><a href="#">30</a></li>-->
<!--					</ul>-->
<!--				</div>-->
<!--				<button type="button" class="btn btn-default" style="cursor: default;">条/页</button>-->
<!--			</div>-->
<!--			<div style="position: relative;top: -88px; left: 285px;">-->
<!--				<nav>-->
<!--					<ul class="pagination">-->
<!--						<li class="disabled"><a href="#">首页</a></li>-->
<!--						<li class="disabled"><a href="#">上一页</a></li>-->
<!--						<li class="active"><a href="#">1</a></li>-->
<!--						<li><a href="#">2</a></li>-->
<!--						<li><a href="#">3</a></li>-->
<!--						<li><a href="#">4</a></li>-->
<!--						<li><a href="#">5</a></li>-->
<!--						<li><a href="#">下一页</a></li>-->
<!--						<li class="disabled"><a href="#">末页</a></li>-->
<!--					</ul>-->
<!--				</nav>-->
<!--			</div>-->
<!--		</div>-->

		<div style="height: 50px; position: relative;top: 30px;">
			<div id="activityPage">

			</div>
		</div>

	</div>

</div>
</body>
</html>